# بوت تليجرام متعدد النماذج AI Powered Pro Bot

هذا المشروع عبارة عن بوت تليجرام متقدم يوفر للمستخدمين الوصول إلى مجموعة متنوعة من نماذج الذكاء الاصطناعي لإنشاء النصوص والصور (مع إمكانية التوسيع لدعم الفيديو والموسيقى)، مع نظام اشتراكات (مجاني ومميز) ونظام إدارة للمسؤولين ومفاتيح API.

## الميزات الرئيسية

*   **دعم نماذج متعددة:** يدعم نماذج مثل GPT (بما في ذلك GPT-4o mini، GPT-4.1 mini)، Gemini (بما في ذلك Gemini 2.5 Flash)، DeepSeek، Perplexity (للبحث)، مع إمكانية إضافة المزيد (مثل Claude، Midjourney، Flux) بسهولة.
*   **نظام الاشتراكات:**
    *   **مجاني:** حد أسبوعي للطلبات، وصول لمجموعة محددة من النماذج.
    *   **مميز:** حد يومي أعلى للطلبات، وصول لجميع النماذج المتاحة، وميزات إضافية (مثل الاستفسارات الصوتية، نماذج الصور المتقدمة).
*   **إدارة المسؤولين:** إضافة وإزالة المسؤولين للتحكم في البوت.
*   **إدارة مفاتيح API:** إضافة وإزالة وتعديل مفاتيح API للنماذج المختلفة وتسميتها لتظهر للمستخدمين.
*   **حفظ السياق:** يحتفظ البوت بسياق المحادثة لتحسين التفاعل، مع إمكانية حذفه.
*   **اختيار النموذج:** يمكن للمستخدمين اختيار النموذج المفضل لديهم من قائمة النماذج المتاحة لاشتراكهم.
*   **أوامر متقدمة:** أوامر لإنشاء الصور، البحث على الويب، إدارة الحساب، وغيرها.
*   **إدارة المستخدمين:** تسجيل المستخدمين وتتبع استخدامهم.
*   **إحصائيات البوت:** عرض إحصائيات الاستخدام للمسؤولين.
*   **رسائل جماعية:** إمكانية إرسال رسائل لجميع المستخدمين (للمسؤولين).

## المتطلبات الأساسية

*   Python 3.9 أو أحدث.
*   حساب تليجرام وإنشاء بوت جديد للحصول على توكن (Token) من BotFather.
*   مفاتيح API للنماذج التي ترغب في استخدامها (OpenAI, Google Gemini, etc.).
*   (اختياري) خادم لتشغيل البوت بشكل مستمر (مثل AWS EC2 المذكور في الطلب).

## الإعداد والتشغيل

1.  **استنساخ المستودع (إذا كان متاحًا) أو نسخ الملفات:**
    ```bash
    # إذا كان المستودع متاحًا
    git clone https://github.com/NaJiKuN/AIPoweredProBot.git
    cd AIPoweredProBot
    # أو قم بإنشاء مجلد وانسخ الملفات إليه
    mkdir AIPoweredProBot
    cd AIPoweredProBot
    # انسخ bot.py, config.py, database_setup.py, database_utils.py
    ```

2.  **إنشاء بيئة افتراضية وتثبيت الحزم:**
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # على Linux/macOS
    # venv\Scripts\activate  # على Windows
    pip install -r requirements.txt # ستحتاج لإنشاء ملف requirements.txt
    # أو قم بتثبيت الحزم يدويًا كما تم في الخطوات السابقة:
    # pip install aiogram requests openai google-generativeai python-dotenv
    ```
    *ملاحظة:* لإنشاء `requirements.txt`، يمكنك تشغيل `pip freeze > requirements.txt` بعد تثبيت الحزم.

3.  **إعداد متغيرات البيئة:**
    *   قم بإنشاء ملف باسم `.env` في المجلد الرئيسي للمشروع (`AIPoweredProBot`).
    *   أضف المتغيرات التالية إلى الملف مع قيمها الخاصة:
        ```dotenv
        TELEGRAM_BOT_TOKEN="YOUR_TELEGRAM_BOT_TOKEN"
        ADMIN_IDS="YOUR_ADMIN_USER_ID,ANOTHER_ADMIN_ID" # قائمة مفصولة بفواصل لمعرفات المسؤولين الأولية
        GEMINI_API_KEY="YOUR_GEMINI_API_KEY" # اختياري
        OPENAI_API_KEY="YOUR_OPENAI_API_KEY" # اختياري
        # أضف مفاتيح API أخرى حسب الحاجة (CLAUDE_API_KEY, etc.)
        ```

4.  **تهيئة قاعدة البيانات:**
    *   قم بتشغيل سكربت تهيئة قاعدة البيانات مرة واحدة لإنشاء الجداول اللازمة:
        ```bash
        python database_setup.py
        ```
    *   سيتم إنشاء ملف `bot_database.db` في نفس المجلد.

5.  **تشغيل البوت:**
    ```bash
    python bot.py
    ```
    *   سيبدأ البوت الآن في الاستماع للرسائل على تليجرام.

## أوامر المستخدم

*   `/start`: عرض رسالة الترحيب ومعلومات حول البوت.
*   `/help`: عرض قائمة بجميع الأوامر المتاحة وشرح موجز.
*   `/account`: عرض معلومات حساب المستخدم (نوع الاشتراك، الرصيد المتبقي، النموذج المختار).
*   `/premium`: (لم يتم تنفيذه بالكامل في الكود الحالي) عرض معلومات حول الاشتراك المميز وكيفية الترقية.
*   `/deletecontext`: حذف سياق المحادثة الحالية لبدء موضوع جديد.
*   `/model`: (لم يتم تنفيذه بالكامل) السماح للمستخدم باختيار نموذج الذكاء الاصطناعي المفضل من النماذج المتاحة له.
*   `/settings`: (لم يتم تنفيذه بالكامل) عرض أو تعديل إعدادات البوت أو النموذج.
*   `/s`: (لم يتم تنفيذه بالكامل) إجراء بحث ذكي على الويب باستخدام Perplexity.
*   `/photo`, `/midjourney`, `/flux`, `/dalle`, `/wow`, `/imagine`: (لم يتم تنفيذه بالكامل) أوامر متعلقة بإنشاء الصور باستخدام نماذج مختلفة.
*   `/video`, `/kling`, `/pika`: (لم يتم تنفيذه بالكامل) أوامر متعلقة بإنشاء الفيديو (تتطلب اشتراكًا مميزًا).
*   `/suno`, `/chirp`: (لم يتم تنفيذه بالكامل) أوامر متعلقة بإنشاء الموسيقى (تتطلب اشتراكًا مميزًا).
*   `/privacy`: (لم يتم تنفيذه بالكامل) عرض شروط الخدمة وسياسة الخصوصية.
*   إرسال رسالة نصية عادية: التفاعل مع نموذج الذكاء الاصطناعي المحدد حاليًا.

## أوامر المسؤولين

*   `/addadmin <user_id>`: إضافة مستخدم جديد كمسؤول.
*   `/removeadmin <user_id>`: إزالة مستخدم من قائمة المسؤولين (لا يمكن إزالة المسؤولين المحددين في `.env`).
*   `/addapikey <service_name> <api_key> <display_name>`: (لم يتم تنفيذه بالكامل) إضافة أو تحديث مفتاح API لخدمة معينة (مثل `ChatGPT`, `Gemini`).
*   `/removeapikey <service_name>`: (لم يتم تنفيذه بالكامل) إزالة مفتاح API لخدمة معينة.
*   `/listapikeys`: (لم يتم تنفيذه بالكامل) عرض قائمة بجميع مفاتيح API المسجلة.
*   `/broadcast <message>`: (لم يتم تنفيذه بالكامل) إرسال رسالة لجميع مستخدمي البوت.
*   `/stats`: (لم يتم تنفيذه بالكامل) عرض إحصائيات استخدام البوت (عدد المستخدمين، الاشتراكات، إلخ).

## ملاحظات إضافية

*   **التكامل مع النماذج:** الكود الحالي يوفر تكاملاً أساسيًا مع OpenAI (GPT) و Google Gemini. يتطلب إضافة ودعم النماذج الأخرى (Claude, DeepSeek, Midjourney, Flux, Perplexity, Suno, etc.) كتابة كود إضافي للتفاعل مع واجهات API الخاصة بها وتحديث منطق اختيار النموذج في `handle_text_message` ومعالجات الأوامر الخاصة بها.
*   **الاشتراكات:** نظام التحقق من الرصيد وتجديده موجود، لكن آلية الترقية الفعلية للاشتراك المميز (مثل الدفع) تحتاج إلى تنفيذ.
*   **الأوامر المتقدمة:** العديد من الأوامر المذكورة في `/help` و `/start` (مثل `/model`, `/settings`, `/s`, `/photo`, `/video`, `/suno`) تحتاج إلى إضافة معالجات خاصة بها في `bot.py`.
*   **إدارة API:** أوامر إدارة مفاتيح API من داخل البوت تحتاج إلى إضافة معالجات لها.
*   **النشر (Deployment):** لتشغيل البوت بشكل دائم، يمكنك نشره على خادم مثل AWS EC2. المسار المذكور في الطلب (`/home/ec2-user/projects/AIPoweredProBot`) هو المكان المقترح لوضع ملفات المشروع على خادم EC2. ستحتاج إلى تشغيل البوت في الخلفية باستخدام أدوات مثل `screen` أو `tmux` أو إعداده كخدمة `systemd`.

## هيكل المشروع

```
AIPoweredProBot/
├── venv/                   # البيئة الافتراضية (تُنشأ تلقائيًا)
├── .env                    # ملف متغيرات البيئة (يجب إنشاؤه)
├── bot.py                  # الكود الرئيسي للبوت ومنطق المعالجات
├── config.py               # تحميل الإعدادات والمتغيرات الثابتة
├── database_setup.py       # سكربت لإنشاء جداول قاعدة البيانات
├── database_utils.py       # دوال مساعدة للتفاعل مع قاعدة البيانات
├── bot_database.db         # ملف قاعدة بيانات SQLite (يُنشأ تلقائيًا)
└── README.md               # هذا الملف
```

---

*تم إنشاء هذا البوت بواسطة Manus AI بناءً على المتطلبات المقدمة.*

