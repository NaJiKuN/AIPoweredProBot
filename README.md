# بوت تليجرام AI متعدد الخدمات

## مقدمة

هذا المشروع عبارة عن بوت تليجرام متقدم مدعوم بالذكاء الاصطناعي، يهدف إلى توفير الوصول إلى مجموعة متنوعة من خدمات الذكاء الاصطناعي (مثل ChatGPT، Gemini، وغيرها) من خلال واجهة تليجرام بسيطة. يتضمن البوت نظامًا لإدارة المستخدمين والاشتراكات (مجاني ومميز)، ولوحة تحكم للمسؤولين لإدارة البوت، ومفاتيح API، والمستخدمين.

**ملاحظة:** هذا الكود يوفر البنية الأساسية والوظائف الإدارية وإدارة المستخدمين. تكامل نماذج الذكاء الاصطناعي الفعلية (استدعاء واجهات برمجة التطبيقات الخاصة بها) لا يزال قيد التطوير ويتطلب إضافة المنطق الخاص بكل نموذج في وحدة `models/ai_interface.py` (غير مدرجة حاليًا).

## الميزات الرئيسية

*   **واجهة تليجرام:** تفاعل سهل ومألوف عبر تليجرام.
*   **دعم نماذج متعددة (مخطط له):** مصمم لدعم نماذج AI مختلفة مثل GPT، Gemini، Claude، Perplexity، Midjourney، Flux.
*   **نظام الاشتراكات:**
    *   **مجاني:** حدود استخدام أسبوعية محددة ونماذج أساسية.
    *   **مميز:** حدود استخدام أعلى، وصول لنماذج متقدمة، ميزات إضافية (مثل الرسائل الصوتية، إنشاء الصور).
*   **إدارة المستخدمين:** تسجيل تلقائي للمستخدمين وتتبع الاستخدام والاشتراكات.
*   **لوحة تحكم للمسؤولين (/admin):**
    *   عرض الإحصائيات (عدد المستخدمين، إجمالي الطلبات).
    *   إدارة مفاتيح API (إضافة، إزالة، تفعيل/تعطيل، تسمية).
    *   إدارة المسؤولين (إضافة، إزالة، عرض).
    *   إرسال رسائل جماعية لجميع المستخدمين.
*   **إدارة السياق:** حفظ سياق المحادثة لكل مستخدم وإمكانية مسحه (/deletecontext).
*   **التحقق من حدود الاستخدام:** منع المستخدمين من تجاوز الحدود المخصصة لاشتراكهم.
*   **قابلية التوسعة:** هيكل منظم باستخدام مجلدات منفصلة (handlers, utils, data, models) لتسهيل التطوير المستقبلي.
*   **التوثيق الداخلي:** تعليقات وشروحات باللغة العربية داخل الكود.

## هيكل المشروع

```
/AIPoweredProBot
|-- bot.py                 # نقطة الدخول الرئيسية للبوت
|-- config.py              # ملف الإعدادات (التوكن، معرفات المسؤولين، حدود الاستخدام، الرسائل)
|-- requirements.txt       # المكتبات المطلوبة
|-- data/
|   |-- bot_data.json      # ملف تخزين البيانات (المستخدمين، المسؤولين، API Keys، الإحصائيات)
|-- handlers/
|   |-- __init__.py
|   |-- admin.py             # معالج محادثة أوامر المسؤولين
|   |-- api_manager_handler.py # معالجات إدارة مفاتيح API (جزء من محادثة المسؤول)
|   |-- user_commands.py     # معالجات الأوامر العادية للمستخدمين والرسائل النصية
|-- utils/
|   |-- __init__.py
|   |-- database.py          # وظائف قراءة وكتابة البيانات من/إلى ملف JSON
|   |-- user_manager.py      # وظائف إدارة المستخدمين، الاشتراكات، حدود الاستخدام، السياق
|-- models/                # (مجلد مخطط له) لوحدات التفاعل مع نماذج AI المختلفة
|   |-- __init__.py
|   |-- ai_interface.py    # (مخطط له) واجهة موحدة لاستدعاء نماذج AI
```

## المتطلبات المسبقة

*   Python 3.8 أو أحدث.
*   مدير الحزم `pip`.
*   حساب تليجرام وإنشاء بوت جديد والحصول على **توكن API** الخاص به من @BotFather.

## التثبيت والإعداد

1.  **نسخ أو تحميل المشروع:**
    ```bash
    git clone https://github.com/NaJiKuN/AIPoweredProBot.git # أو قم بتحميل الملفات يدويًا
    cd AIPoweredProBot
    ```

2.  **إنشاء بيئة افتراضية (مستحسن):**
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # على Linux/macOS
    # venv\Scripts\activate  # على Windows
    ```

3.  **تثبيت المكتبات المطلوبة:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **إعداد ملف التكوين (`config.py`):**
    *   افتح ملف `config.py`.
    *   **هام:** استبدل قيمة `TELEGRAM_BOT_TOKEN` بالتوكن الخاص ببوتك الذي حصلت عليه من @BotFather.
    *   **هام:** تأكد من أن `ADMIN_IDS` تحتوي على معرف تليجرام **الرقمي** الخاص بك كمسؤول رئيسي. يمكنك الحصول على معرفك من بوتات مثل @userinfobot.
    *   (اختياري) يمكنك مراجعة وتعديل حدود الاستخدام `USAGE_LIMITS` والرسائل `WELCOME_MESSAGE`, `HELP_MESSAGE`, `PRIVACY_POLICY` حسب الحاجة.
    *   (اختياري) يمكنك تعديل `INITIAL_API_KEYS` إذا أردت إضافة مفاتيح أولية، ولكن يفضل إدارتها لاحقًا عبر أمر `/admin`.

## تشغيل البوت

لتشغيل البوت، نفذ الأمر التالي من داخل مجلد المشروع (`AIPoweredProBot`):

```bash
python bot.py
```

إذا تم كل شيء بشكل صحيح، سترى رسالة في الطرفية تشير إلى أن البوت قد بدأ ويعمل.

## الاستخدام

### أوامر المستخدم العادي:

*   `/start`: بدء البوت وعرض الرسالة الترحيبية.
*   `/help`: عرض قائمة الأوامر المتاحة ووصفها.
*   `/account`: عرض معلومات حسابك (نوع الاشتراك، الاستخدام الحالي).
*   `/premium`: عرض معلومات حول الاشتراك المميز وميزاته.
*   `/deletecontext`: مسح سياق المحادثة الحالية لبدء موضوع جديد.
*   `/privacy`: عرض شروط الخدمة وسياسة الخصوصية.
*   `/model`: (قيد التطوير) لاختيار نموذج الذكاء الاصطناعي.
*   `/settings`: (قيد التطوير) لعرض وتعديل إعدادات البوت (إذا وجدت).
*   `/s`: (قيد التطوير) للبحث في الويب.
*   `/photo`: (قيد التطوير) لإنشاء الصور.
*   `/video`: يعرض رسالة حول قيود إنشاء الفيديو.
*   `/suno`, `/chirp`: يعرض رسالة حول قيود إنشاء الموسيقى.
*   `/midjourney`: يوجه المستخدم لاستخدام `/photo`.
*   **إرسال رسالة نصية:** التفاعل مع نموذج الذكاء الاصطناعي المحدد (حالياً يرد برسالة تفيد بأنه قيد التطوير).

### أوامر المسؤول:

*   `/admin`: فتح لوحة تحكم المسؤول (تظهر كأزرار مضمنة).
    *   **عرض الإحصائيات:** يعرض إجمالي الطلبات وعدد المستخدمين.
    *   **إدارة مفاتيح API:**
        *   عرض المفاتيح الحالية وحالتها (مفعل/معطل).
        *   إضافة مفتاح جديد (يتطلب إدخال معرف فريد، قيمة المفتاح، واسم وصفي).
        *   حذف مفتاح موجود.
        *   تفعيل/تعطيل مفتاح موجود.
    *   **إضافة مسؤول:** يتطلب إرسال معرف المستخدم الرقمي للمسؤول الجديد.
    *   **إزالة مسؤول:** عرض قائمة بالمسؤولين (باستثناء الرئيسي) لاختيار من تريد إزالته.
    *   **عرض المسؤولين:** عرض قائمة بمعرفات المسؤولين الحاليين.
    *   **إرسال رسالة للجميع:** إرسال رسالة نصية إلى جميع المستخدمين المسجلين في البوت.
    *   **خروج:** إغلاق لوحة التحكم.
*   `/cancel`: لإلغاء عملية إدارية جارية (مثل إضافة مفتاح API).

## ملاحظات هامة

*   **أمان التوكن ومفاتيح API:** حافظ على سرية `TELEGRAM_BOT_TOKEN` ومفاتيح API الخاصة بخدمات الذكاء الاصطناعي. لا تقم بمشاركتها علنًا أو رفعها إلى مستودعات عامة.
*   **تكامل نماذج AI:** الجزء الخاص باستدعاء نماذج الذكاء الاصطناعي الفعلية (`models/ai_interface.py` ومعالجتها في `handlers/user_commands.py`) يحتاج إلى تطوير إضافي بناءً على واجهات برمجة التطبيقات المحددة التي ترغب في استخدامها (OpenAI, Google AI, Anthropic, etc.).
*   **قاعدة البيانات:** يستخدم البوت حاليًا ملف JSON بسيط (`data/bot_data.json`) لتخزين البيانات. قد يكون هذا مناسبًا للاستخدام المحدود، ولكن للتطبيقات الأكبر أو التي تتطلب أداءً أفضل، يفضل الانتقال إلى قاعدة بيانات حقيقية مثل SQLite أو PostgreSQL.
*   **التعامل مع الأخطاء:** تم إضافة معالج أخطاء أساسي، ولكن يمكن تحسينه للتعامل مع أنواع مختلفة من الأخطاء بشكل أكثر تحديدًا وإبلاغ المستخدم أو المسؤول بشكل مناسب.
*   **الاشتراكات والدفع:** لا يتضمن الكود الحالي أي نظام دفع فعلي. إدارة الاشتراكات تتم يدويًا عبر المسؤول (أو يمكن تطويرها لاحقًا للتكامل مع بوابات الدفع).


