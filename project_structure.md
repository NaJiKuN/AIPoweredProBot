# هيكلية مشروع بوت تليجرام AI (AIPoweredProBot)

يهدف هذا المستند إلى توضيح هيكلية المجلدات والملفات لمشروع بوت التليجرام المدعوم بالذكاء الاصطناعي، وشرح دور كل ملف ومجلد.

## الهيكل العام

```
AIPoweredProBot/
├── bot.py                  # نقطة الدخول الرئيسية للبوت، تهيئة وتشغيل البوت
├── config.py               # ملف الإعدادات (التوكن، معرف المسؤول، إعدادات أخرى)
├── requirements.txt        # قائمة المكتبات المطلوبة للمشروع
├── README.md               # ملف تعريفي بالمشروع وكيفية الإعداد والتشغيل
├── project_structure.md    # هذا الملف (شرح هيكلية المشروع)
├── database/               # مجلد لتخزين ملفات قاعدة البيانات (مثل SQLite)
│   └── bot_database.db     # (مثال) ملف قاعدة البيانات
├── handlers/               # مجلد يحتوي على معالجات الأوامر والرسائل المختلفة
│   ├── __init__.py         # لتعريف المجلد كحزمة بايثون
│   ├── start.py            # معالج أمر /start والرسالة الترحيبية
│   ├── help.py             # معالج أمر /help وقائمة المساعدة
│   ├── account.py          # معالج أمر /account وعرض معلومات الحساب
│   ├── premium.py          # معالج أمر /premium وعرض خيارات الاشتراك
│   ├── settings.py         # معالج أمر /settings وإعدادات المستخدم والنماذج
│   ├── admin.py            # معالجات أوامر المسؤولين (إدارة المسؤولين، API، الإشعارات، الإحصائيات)
│   ├── ai_models.py        # معالج اختيار النماذج والتفاعل معها (نصي)
│   ├── image_gen.py        # معالج أوامر توليد الصور (/photo, /wow, /flux, /dalle, /imagine)
│   ├── video_gen.py        # معالج أمر توليد الفيديو (/video)
│   ├── audio_gen.py        # معالج أمر توليد الأغاني (/suno, /chirp)
│   ├── web_search.py       # معالج أمر البحث على الويب (/s)
│   ├── context.py          # معالج أمر حذف السياق (/deletecontext) وإدارة السياق
│   └── other_commands.py   # معالجات الأوامر الأخرى (/privacy, /empty)
└── utils/                  # مجلد يحتوي على الأدوات والوظائف المساعدة
    ├── __init__.py         # لتعريف المجلد كحزمة بايثون
    ├── database_helper.py  # وظائف مساعدة للتعامل مع قاعدة البيانات (إضافة/تحديث/حذف المستخدمين، الاشتراكات، API Keys)
    ├── api_helper.py       # وظائف مساعدة للتفاعل مع واجهات برمجة تطبيقات نماذج الذكاء الاصطناعي المختلفة
    ├── subscription_manager.py # وظائف إدارة الاشتراكات، التحقق من الصلاحيات، حساب الطلبات
    ├── keyboards.py        # وظائف إنشاء لوحات المفاتيح المخصصة (الأزرار)
    └── message_templates.py # قوالب الرسائل المستخدمة في البوت (للتوحيد وسهولة التعديل)

```

## شرح الملفات والمجلدات

*   **`bot.py`**: الملف الرئيسي الذي يقوم بتشغيل البوت. يحتوي على تهيئة مكتبة التليجرام (مثل `python-telegram-bot`)، تسجيل المعالجات (handlers)، وبدء الاستماع للتحديثات.
*   **`config.py`**: يخزن الإعدادات الثابتة مثل توكن البوت، معرفات المسؤولين الأساسيين، وربما روابط API أو إعدادات أخرى. يساعد فصل الإعدادات في الحفاظ على نظافة الكود الرئيسي وسهولة التعديل.
*   **`requirements.txt`**: يسرد جميع مكتبات بايثون التي يعتمد عليها المشروع. يُستخدم لتثبيت الاعتماديات بسهولة (`pip install -r requirements.txt`).
*   **`README.md`**: يقدم وصفاً للمشروع، تعليمات التثبيت والتشغيل، وكيفية المساهمة (إذا كان مفتوح المصدر).
*   **`project_structure.md`**: هذا الملف، يشرح تنظيم المشروع.
*   **`database/`**: يحتوي على ملفات قاعدة البيانات. يُفضل استخدام SQLite لسهولة الإدارة في المشاريع الصغيرة والمتوسطة، أو يمكن الاتصال بقواعد بيانات خارجية.
    *   **`bot_database.db`**: ملف قاعدة بيانات SQLite لتخزين معلومات المستخدمين، الاشتراكات، مفاتيح API، إلخ.
*   **`handlers/`**: قلب البوت، حيث يتم معالجة الأوامر والرسائل الواردة. كل ملف يركز على مجموعة معينة من الأوامر أو الوظائف.
    *   **`__init__.py`**: يجعل المجلد `handlers` حزمة بايثون قابلة للاستيراد.
    *   **`start.py`**: يعالج الأمر `/start`.
    *   **`help.py`**: يعالج الأمر `/help`.
    *   **`account.py`**: يعالج الأمر `/account`.
    *   **`premium.py`**: يعالج الأمر `/premium` وعمليات الشراء.
    *   **`settings.py`**: يعالج الأمر `/settings`.
    *   **`admin.py`**: يعالج أوامر الإدارة الخاصة بالمسؤولين.
    *   **`ai_models.py`**: يعالج الرسائل النصية العادية ويتفاعل مع نماذج الذكاء الاصطناعي المحددة.
    *   **`image_gen.py`**: يعالج أوامر توليد الصور.
    *   **`video_gen.py`**: يعالج أوامر توليد الفيديو.
    *   **`audio_gen.py`**: يعالج أوامر توليد الصوت/الموسيقى.
    *   **`web_search.py`**: يعالج أمر البحث في الويب.
    *   **`context.py`**: يعالج أمر `/deletecontext` ويدير سياق المحادثة.
    *   **`other_commands.py`**: يعالج الأوامر الإضافية مثل `/privacy`.
*   **`utils/`**: يحتوي على وظائف مساعدة يتم استدعاؤها من قبل المعالجات أو أجزاء أخرى من البوت. يساعد هذا في تجنب تكرار الكود وتنظيم المنطق.
    *   **`__init__.py`**: يجعل المجلد `utils` حزمة بايثون قابلة للاستيراد.
    *   **`database_helper.py`**: يوفر واجهة بسيطة للتفاعل مع قاعدة البيانات (إنشاء الجداول، إضافة مستخدم، تحديث الاشتراك، جلب مفاتيح API، إلخ).
    *   **`api_helper.py`**: يحتوي على وظائف للاتصال بواجهات برمجة التطبيقات المختلفة لنماذج الذكاء الاصطناعي، مع معالجة الأخطاء وتنسيق الاستجابات.
    *   **`subscription_manager.py`**: يدير منطق الاشتراكات، يتحقق مما إذا كان لدى المستخدم وصول إلى ميزة معينة، ويقوم بخصم رصيد الطلبات.
    *   **`keyboards.py`**: ينشئ لوحات المفاتيح المضمنة (Inline Keyboards) ولوحات المفاتيح العادية (Reply Keyboards) المستخدمة في البوت.
    *   **`message_templates.py`**: يخزن النصوص الثابتة والرسائل المنسقة التي يرسلها البوت، مما يسهل تعديلها وترجمتها إذا لزم الأمر.

هذه الهيكلية تهدف إلى جعل الكود منظماً وقابلاً للصيانة والتوسع في المستقبل.
